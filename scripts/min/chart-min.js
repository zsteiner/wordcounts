function mobileDetect(){"inline-block"===$(".menu-button").css("display")&&(isMobile=!0),isMobile===!0&&$("#toggle1").click()}function issueChart(){chart=c3.generate({bindto:"#issue-chart",padding:{right:24},data:{url:"data/issues.json",mimeType:"json",type:"bar",keys:{x:"issue",value:selectedCandidates}},axis:{rotated:!0,x:{type:"category",height:40},y:{tick:{format:d3.format(",f"),count:3}}},color:{pattern:colors},bar:{width:{ratio:.8}}})}function averageChart(){chartAverage=c3.generate({bindto:"#average-chart",padding:{right:24},data:{url:"data/average.json",mimeType:"json",type:"bar",keys:{x:"issue",value:selectedCandidates}},axis:{rotated:!0,x:{type:"category",height:40},y:{tick:{format:d3.format(",f"),count:3}}},color:{pattern:colors},bar:{width:{height:.7}}})}function countChart(){chartCount=c3.generate({bindto:"#count-chart",padding:{right:24},data:{url:"data/count.json",mimeType:"json",type:"bar",keys:{x:"issue",value:selectedCandidates}},axis:{rotated:!0,x:{type:"category",height:40},y:{tick:{format:d3.format(",f"),count:3}}},color:{pattern:colors},bar:{width:{ratio:.7}}})}function makeCharts(){issueChart(),countChart(),averageChart()}function defaultCandidates(a){var e=candidates[a].default;e===!0&&$("#candidate"+a).click()}function createCandidateList(a){var e=document.getElementById("candidate-list"),t=document.getElementById("selected-candidates");$.each(a,function(a,s){s=e.appendChild(document.createElement("li"));var d='<img class="candidate-image" src="images/candidates/'+candidates[a].code+'.jpg">',i='<input type="checkbox" id="candidate'+a+'"><label for="candidate'+a+'" class="candidate-label">'+d+'</label><div class="candidate-name">'+candidates[a].first+" "+candidates[a].last+'</div><div class="party '+candidates[a].party+'"></div>';candidates[a].active===!1?(s.innerHTML=i+'<div class="wrapper"><div class="ribbon-wrapper"><div class="ribbon dropped-out-ribbon">Out</div></div></div>',$(s).addClass("dropped-out")):s.innerHTML=i,s.setAttribute("data-candidate-id",candidates[a].last),$(s).find("input").on("change",function(){var e=t.appendChild(document.createElement("li"));if($(this).is(":checked"))e.innerHTML=d+'<div class="candidate-info"><div class="candidate-name">'+candidates[a].first+" "+candidates[a].last+'<span class="party '+candidates[a].party+'"></span></div><div class="candidate-number"><span class="number">'+candidates[a].issues+'</span>issues <span class="block">covered</span></div><div class="candidate-number"><span class="number">'+candidates[a].average+'</span>average <span class="block">words</span></div><div class="candidate-site"><a href="'+candidates[a].url+'"><span class="block"><svg class="icon icon-info"><use xlink:href="#icon-info"></use></svg></span>learn more</a></div></div>',e.setAttribute("data-candidate-id",candidates[a].last),selectedCandidates.push(candidates[a].last);else{var s=selectedCandidates.indexOf(candidates[a].last);$("#selected-candidates li:empty").remove(),$('#selected-candidates li[data-candidate-id="'+candidates[a].last+'"]').remove(),selectedCandidates.splice(s,1)}makeCharts()}),defaultCandidates(a)}),makeCharts()}var chart,candidates=[],selectedCandidates=[],c3,isMobile=!1,colors=["#4791E5","#FAA43A","#60BD68","#F17CB0","#9C604B","#B276B2","#DECF3F","#F15854","#97C8D7","#787875"];$.getJSON("data/candidates.js").done(function(a){candidates=a,createCandidateList(candidates)}).error(function(a){error=a}),$("#issue").click(function(){$(".chart-buttons button").removeClass("is-selected"),$(this).addClass("is-selected"),$("#issue-chart").removeClass("is-hidden").siblings(".chart").addClass("is-hidden"),issueChart()}),$("#count").click(function(){$(".chart-buttons button").removeClass("is-selected"),$(this).addClass("is-selected"),$("#count-chart").removeClass("is-hidden").siblings(".chart").addClass("is-hidden"),countChart()}),$("#average").click(function(){$(".chart-buttons button").removeClass("is-selected"),$(this).addClass("is-selected"),$("#average-chart").removeClass("is-hidden").siblings(".chart").addClass("is-hidden"),averageChart()}),$(".number").mask("000,000,000",{reverse:!0}),setTimeout(mobileDetect,3e3);